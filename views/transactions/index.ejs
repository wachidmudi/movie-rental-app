<%- include('../partials/header', { title: 'Transactions' }) %>

<div class="py-4">
  <div class="row">
    <div class="col">
      <h1>List of Transactions</h1>
    </div>
    <div class="col"></div>
  </div>
</div>

<div class="row">
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Movies</th>
      <th scope="col">Total</th>
    </tr>
  </thead>
  <tbody>
    <% transactions.forEach((transaction, i) => { %>
      <tr>
        <th scope="row"><%= i + 1 %></th>
        <td><%= transaction.full_name %> </td>
        <td>
          <ol>
            <% transaction.Movies.forEach(movie => { %>
            <li><%= movie.title %> - <%= movie.formatPrice %></li>
            <% }) %>
          </ol>
        </td>
        <td><%= formatRupiah(transaction.Movies.reduce((acc, val) => acc + val.price, 0)) %></td>
      </tr>
    <% }) %>
  </tbody>
</table>
</div>

<%- include('../partials/footer') %>
